<!DOCTYPE html>
<html>

<style>
@import url('https://fonts.googleapis.com/css?family=Source+Sans+Pro');
@import url('https://fonts.googleapis.com/css?family=Source+Code+Pro');
* {
    box-sizing: border-box;
    font-family: 'Source Sans Pro', sans-serif;
}
h2, p {
	padding: 0px;
	margin: 0px;
    display: inline;
}
mark{
    font-family: Source Code Pro;
    color:white;
    background-color:red;
    font-weight: bold;
}
table{
    border-collapse: collapse;
    border: 0px;
    table-layout: fixed;
    width: 100%;
    text-align: left;
} 
tr,td {
    border: 0px;
    padding-top: 0px;
    valign: top;
}
.cameraView{
    width: 100%;
}
#mapDiv{
    position: relative;
    width: 100%;
    height: 500px
    max-height: 500px;
    min-height: 500px;
}
#map{
    position: relative;
    width: 100%;
    height: 100%;
}
.viewContainer .compass{
    position: absolute;
    top: 110%;
    left: 50%;
    max-width: 600px;
    width: 600px;
    height: 600px;
    /*transform: translate(-50%, -50%) rotateX(70deg) rotateZ(-20deg)*/;
}
/* img fullscreen */
.viewContainer {
    position: relative;
    overflow: hidden;
}
.viewContainer img {
    width: 100%;
}
.viewContainer .ui-button {
    position: absolute;
    top: 5px;
    right: 5px;
}
#mapDiv .ui-button {
    position: absolute;
    top: 5px;
    right: 5px;
    z-index: 1000;
}
/* Date slider */
#day-label {
    left: 1em;
    bottom: 1em;
    color: rgb(40, 40, 40);
    width: 100%;
    text-align: center;
    padding-bottom: 0.5em;
}
#day-panel {
    visibility: hidden;
    position: absolute;
    left: 1em;
    bottom: 1em;
    padding: 1em;
    background-color: rgba(256, 256, 256, 0.8);
    border-radius: 5px;
    border: 1px solid rgb(40, 40, 40);
    z-index: 1000;
}
#day-panel div {
    width: 10em;
    z-index: 1000;
}
#road-search{
    position: absolute;
    top: 5px;
    left: 60px;
    z-index: 1000;
}
/* Tooltip container */
.tooltip {
    position: relative;
    display: inline;
    border-bottom: 1px dotted black; /* If you want dots under the hoverable text */
}
/* Tooltip text */
.tooltip .tooltiptext {
    font-size: 75%;
    white-space: normal;
    display: block;
    visibility: hidden;
    width: 400px;
    max-width:400px;
    min-width:400px;
    word-wrap: break-word;
    background-color: black;
    color: #fff;
    text-align: left;
    padding: 5px 5px;
    border-radius: 6px;
 
    /* Position the tooltip text */
    position: absolute;
    z-index: 1;
}

/* Show the tooltip text when you mouse over the tooltip container */
.tooltip:hover .tooltiptext {
    visibility: visible;
}
/* The container <div> - needed to position the dropdown content */
.dropdown {
    position: relative;
    display: inline-block;
}
/* Dropdown Content (Hidden by Default) */
.dropdown-content {
    font-size: 83%;
    display: none;
    position: absolute;
    background-color: rgba(255,255,255,0.8);
    min-width: 48ch;
    max-height: 200px;
    overflow: auto;
    z-index: 1001;
}
/* Links inside the dropdown */
.dropdown-content table{
    white-space: nowrap;
    overflow: hidden;
    color: black;
    cursor: pointer;
    width: 100%;
    padding-left: 1px;
}
</style>
<head>
<title>Fire Dashboard</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<!--<meta http-equiv="refresh" content="60" />  Page refresh --> 
<!-- google ajax CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"></link>
<script
    src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"
    integrity="sha256-VazP97ZCwtekAsvgPBSUwPFKdrwD3unUfSGVYrahUqU="
    crossorigin="anonymous"></script>
<!-- Load Leaflet from CDN -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
crossorigin=""></script>
<!-- Load Esri Leaflet from CDN -->
<script src="https://unpkg.com/esri-leaflet@2.2.3/dist/esri-leaflet.js"
integrity="sha512-YZ6b5bXRVwipfqul5krehD9qlbJzc6KOGXYsDjU9HHXW2gK57xmWl2gU6nAegiErAqFXhygKIsWPKbjLPXVb2g=="
crossorigin=""></script>
<script src="https://unpkg.com/esri-leaflet-renderers@2.0.6"></script>
<!-- Load Esri Leaflet Geocoder from CDN -->
<link rel="stylesheet" href="https://unpkg.com/esri-leaflet-geocoder@2.2.13/dist/esri-leaflet-geocoder.css"
integrity="sha512-v5YmWLm8KqAAmg5808pETiccEohtt8rPVMGQ1jA6jqkWVydV5Cuz3nJ9fQ7ittSxvuqsvI9RSGfVoKPaAJZ/AQ=="
crossorigin="">
<script src="https://unpkg.com/esri-leaflet-geocoder@2.2.13/dist/esri-leaflet-geocoder.js"
integrity="sha512-zdT4Pc2tIrc6uoYly2Wp8jh6EPEWaveqqD3sT0lf5yei19BC1WulGuh5CesB0ldBKZieKGD7Qyf/G0jdSe016A=="
crossorigin=""></script>
<!-- other sources -->
<script src="./lib/leaflet.rotatedMarker.js"></script>
<script src="FireDash.js"></script>

</head>

<body>
<table id='table'>
    <tr>
        <td id='viewer0'>
            <div id='mapDiv' style='height:100px;'>
                <div id='map'>
                </div>
                <div id='road-search'>
                    <select name='forest' id='forest'>
                        <option value='0501' title='Angeles'>ANF</option>
                        <option value='0502' title='Cleveland'>CNF</option>
                        <option value='0503' title='Eldorado' selected="selected">ENF</option>
                        <option value='0504' title='Inyo'>INF</option>
                        <option value='0505' title='Klamath'>KNF</option>
                        <option value='0506' title='Lassen'>LNF</option>
                        <option value='0507' title='Los Padres'>LPF</option>
                        <option value='0508' title='Mendocino'>MNF</option>
                        <option value='0509' title='Modoc'>MDF</option>
                        <option value='0510' title='Six Rivers'>SRF</option>
                        <option value='0511' title='Plumas'>PNF</option>
                        <option value='0512' title='San Bernardino'>BDF</option>
                        <option value='0513' title='Sequoia'>SQF</option>
                        <option value='0514' title='Shasta-Trinity'>SHF</option>
                        <option value='0515' title='Sierra'>SNF</option>
                        <option value='0516' title='Stanislaus'>STF</option>
                        <option value='0517' title='Tahoe'>TNF</option>
                        <option value='0519' title='Lake Tahoe Basin Mgmt Unit'>TMU</option>
                    </select>
                    <div class="dropdown">
                        <input id='search_bar' type='text' style='width:48ch;' placeholder='Type a feature name or ID and press Enter to search'>
                        <div id='search_dropdown' class='dropdown-content'>
                            <table id= 'search-table' style="width:100%"></table>
                        </div>
                    </div>
                    <span id='search-status' style='font-size:75%;font-style:italic;'></span>
                </div>
                <button id='refresh' class="ui-button ui-widget ui-corner-all" style='width:20px;height:20px;padding:0;' title='Fullscreen'><span class="ui-icon ui-icon-arrow-4-diag"></span></button>
                <div id="day-panel">
                        <div id="day-label"></div>
                        <div id="day-slider" style="width:150px;"></div>
                </div>
            </div>
        </td>
        <td id='viewer1'>
            <div class='viewContainer'>
                <img src="./lib/alert-tahoe-logo.png" id="camera0" class='cameraView' title='Select cameras from the map'>
                <button class="ui-button ui-widget ui-corner-all" title='Fullscreen' style='width:20px;height:20px;padding:0;'><span class="ui-icon ui-icon-arrow-4-diag"></span></button>
                <img id='compass0' src='./lib/compass_ring.svg' class='compass'>
            </div>
        </td>
    </tr>
    <tr>
        <td id='viewer2'>
            <div class='viewContainer'>
                <img src="./lib/alert-tahoe-logo.png" id="camera1" class='cameraView' title='Select cameras from the map'>
                <button class="ui-button ui-widget ui-corner-all" title='Fullscreen' style='width:20px;height:20px;padding:0;'><span class="ui-icon ui-icon-arrow-4-diag"></span></button>
                <img id='compass1' src='./lib/compass_ring.svg' class='compass'>
            </div>
        </td>
        <td id='viewer3'>
            <div class='viewContainer'>
                <img src="./lib/alert-tahoe-logo.png" id="camera2" class='cameraView' title='Select cameras from the map'>
                <button class="ui-button ui-widget ui-corner-all" title='Fullscreen' style='width:20px;height:20px;padding:0;'><span class="ui-icon ui-icon-arrow-4-diag"></span></button>
                <img id='compass2' src='./lib/compass_ring.svg' class='compass'>
            </div>
        </td>
    </tr>
</table>
</body>
<script>
// refresh the cameras every 10 seconds
setInterval(refreshCam, 10 * 1000);
// Forest change event
var forest = document.getElementById("forest");
forest.addEventListener("change", function(event) {
    event.preventDefault();
    forestQuery(document.getElementById('forest').value);
});
// road search event
var search_bar = document.getElementById("search_bar");
search_bar.addEventListener("keyup", function(event) {
    event.preventDefault();
    if (event.keyCode === 13) {
        var text = document.getElementById('search_bar').value
        var security_id = document.getElementById('forest').value
        layerQuery(security_id, text);
        document.getElementById("search_dropdown").style.display = 'inline';
    }
});
</script>
</html>
